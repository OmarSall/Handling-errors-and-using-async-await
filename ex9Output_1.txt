This is the content for the ex9 non-async version.